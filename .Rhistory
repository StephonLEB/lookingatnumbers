blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
?blogdown::serve_site
blogdown::serve_site()
?file.create()
?file
?file.create()
?file.create("shit.css")
file.create("shit.css")
getwd()
getwd()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
library(tidyverse)
starwars
authors <- pages %>% group_by(author) %>% summarise(sessions = sum(sessions),
`# of blogs` = n()) %>%
filter(!str_detect(author, "404")) %>%
mutate(author = str_remove(author, " by ")) %>%
arrange(desc(sessions))
---
title: "Wow"
author: "Frida Gomam"
date: 2015-07-23T21:13:14-05:00
categories: ["R"]
tags: ["R Markdown", "plot", "regression"]
---
```{r echo=FALSE}
library(googleAnalyticsR)
library(knitr)
knitr::opts_chunk$set(echo = TRUE, message = FALSE, results = FALSE)
ga_auth("rmd.auth")
ga_id <- 1834906 #alloy
range <- c("2018-12-01","2018-12-31")
```
So your business is b blogging to get new traffic and leads, but morale is declining because writers can't easily see the evidence of their work. Google Analytics has many relevant metrics for individual web pages, but doesn't have information identifying the author of a post. This makes aggregating blogs by author a pain, particularly for companies like Moz who likely have hundreds of blog posts around the web.
Enter R. If you're not using R to analyze Google Analytics data, there are quite a few tutorials out there for getting started. With a few of its packages, we can easily get author-level Google Analytics data.
```{r, message=FALSE, echo=TRUE}
library(tidyverse)
library(rvest)
library(googleAnalyticsR)
ga_auth()
```
We start by querying the Google Analytics data we want. Here, the only metrics I want to see are sessions for each blog. Luckily, our url structure is such that every blog has "blog/" in its url.
```{r}
organic <- segment_ga4("organic",segment_id = "gaid::-5")
dim <- dim_filter("landingPagePath","REGEXP","blog/") %>% list() %>% filter_clause_ga4()
pages <- google_analytics(ga_id, #your id here
date_range = range, #your date range
dimensions = c("landingPagePath"),
metrics = c("sessions"),
dim_filters = dim,
segments = organic)
```
Google Analytics will return a list of url paths. we want to append them to the host name to get the author name from the url.
```{r}
pages <- pages %>% mutate(page = paste0("https://www.alloymagnetic.com",landingPagePath))
```
To retrieve the the author names, the rvest package comes in handy. The author can be identified by its CSS selector.
```{r}
pages <- pages %>% mutate(author = map(page,~try(read_html(.) %>%
html_node("span.author") %>%
html_text())) %>% unlist())
```
It's likely that you'll get status errors for some of the pages, particularly if some of your blogs have been unpublished in your date range.
Finally, we group the landing page traffic by author to get our list of writers.
```{r, results=TRUE}
authors <- pages %>% group_by(author) %>% summarise(sessions = sum(sessions),
`# of blogs` = n()) %>%
filter(!str_detect(author, "404")) %>%
mutate(author = str_remove(author, " by ")) %>%
arrange(desc(sessions))
```
authors <- pages %>% group_by(author) %>% summarise(sessions = sum(sessions),
`# of blogs` = n()) %>%
filter(!str_detect(author, "404")) %>%
mutate(author = str_remove(author, " by ")) %>%
arrange(desc(sessions))
authors
starwars
authors %>% mutate(author = starwars$name)
authors %>% mutate(author = str_replace(author,^$,starwars$name))
authors %>% mutate(author = str_replace(author,"^$",starwars$name))
authors %>% mutate(author = str_replace(author,".",starwars$name))
authors %>% mutate(name = starwars$name)
library(tidyverse)
authors
authors %>% mutate(name = starwars$name)
starwars[1:10]
authors %>% mutate(name = starwars[1:10]$name)
authors %>% mutate(name = starwars[1:10,]$name)
authors %>% mutate(name = starwars[1:10,]$name) %>% select(-author)
authors %>% mutate(name = starwars[1:10,]$name) %>% select(-author,name)
authors %>% mutate(name = starwars[1:10,]$name) %>% select(name,2,3,-author)
blogdown::serve_site()
file.info("shit.css")
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
library(googleAnalyticsR)
library(knitr)
knitr::opts_chunk$set(echo = TRUE, message = FALSE, results = FALSE)
ga_auth("rmd.auth")
ga_id <- 1834906 #alloy
range <- c("2018-01-01","2018-12-31")
library(tidyverse)
library(rvest)
library(googleAnalyticsR)
ga_auth()
organic <- segment_ga4("organic",segment_id = "gaid::-5")
dim <- dim_filter("landingPagePath","REGEXP","blog/") %>% list() %>% filter_clause_ga4()
pages <- google_analytics(ga_id, #your id here
date_range = range, #your date range
dimensions = c("landingPagePath"),
metrics = c("sessions"),
dim_filters = dim,
segments = organic)
pages <- pages %>% mutate(page = paste0("https://www.alloymagnetic.com",landingPagePath))
pages <- pages %>% mutate(author = map(page,~try(read_html(.) %>%
html_node("span.author") %>%
html_text())) %>% unlist())
authors <- pages %>% group_by(author) %>% summarise(sessions = sum(sessions),
`# of blogs` = n()) %>%
filter(!str_detect(author, "404")) %>%
mutate(author = str_remove(author, " by ")) %>%
arrange(desc(sessions))
authors %>%
mutate(name = starwars[1:10,]$name) %>%
select(name,2,3,-author) %>% kable() #Protecting author identity
authors <- pages %>% group_by(author) %>% summarise(sessions = sum(sessions),
`# of blogs` = n()) %>%
filter(!str_detect(author, "404")) %>%
mutate(author = str_remove(author, " by ")) %>%
arrange(desc(sessions))
authors %>%
mutate(name = starwars[1:12,]$name) %>%
select(name,2,3,-author) %>% kable() #Protecting author identity
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::new_post("google-analytics-blog-authors-r")
i
i
i
i <- 23
i
list(2,3,3)
a <- list(aa=1,bb=2,cc=3)
str(a)
data.frame(a)
a
a
a
a
a <- a$bb
data.fram(a=2,b=3,c=4)
data.frame(a=2,b=3,c=4)
data.frame(a=c(2,3),b=c(3,4,c=c(4,5))
data.frame(a=c(2,3),b=c(3,4),c=c(4,5))
data.frame(a=c(2,3),b=c(3,4),c=c(4,5))
stu <- data.frame(a=c(2,3),b=c(3,4),c=c(4,5))
str(stu)
a
a <- list(aa=1,bb=2,cc=3)
as.vector(a)
a %>% unlist()
library(magrittr)
a %>% unlist()
unlist
function marge() {
print("MAAAAARGGEEE")
}
function marge() {
print("MAAAAARGGEEE")
}
function marge() {
print("MAAAAARGGEEE")
}
function marge() {
print(MAAAAARGGEEE)
}
gho = 56
gho
function plus(x) {
mean(x) + 1
}
marge <- function() {
print("MAAAARGE")
}
marge()
marge()
marge()
marge()
marge <- function() {
print("MAAAAAAAAARRRRRRRGE")
}
marge
marge()
cars
mtcars
mtcars %>% cbind(rownames(mtcars),mtcars)
m <- mtcars %>% cbind(rownames(mtcars),mtcars) tbl_df()
m <- mtcars %>% cbind(rownames(mtcars),mtcars) %>% tbl_df()
library(tibble)
m <- mtcars %>% cbind(rownames(mtcars),mtcars) %>% tbl_df()
library(tidyverse)
m <- mtcars %>% cbind(rownames(mtcars),mtcars) %>% tbl_df()
m <- mtcars %>% cbind(rownames(mtcars),mtcars) #%>% tbl_df()
m
m %>% tbl_df()
m
m <- mtcars %>% cbind(rownames(mtcars),mtcars) %>% data.frame()
m
m <- mtcars %>% cbind(rownames(mtcars),mtcars) %>% data.frame(1=p)
m <- mtcars %>% cbind(rownames(mtcars),mtcars) %>% data.frame(p=1)
m
mtcars
data.frame(cars = rownames(mtcars),mtcars)
data.frame(cars = rownames(mtcars),mtcars) %>% tbl_df()
m <- data.frame(cars = rownames(mtcars),mtcars) %>% tbl_df()
names(m)
colnames(me)
colnames(m)
colnames(m)[4:5]
colnames(m)[-4:5]
colnames(m)[,-4:5]
m[,4:5]
m[,-4:5]
m %>% select(-4:5)
m %>% select(-4)
m %>% select(-4:5)
m %>% select(-[4:5])
m %>% select(-4:5)
m %>% select(-4,5)
m
m %>% select(-4,5)
m %>% select(-4,5)
m %>% select(-4,5)
m
m %>% select(-1)
m %>% select(-1,2)
m %>% select(-1,2,2)
m %>% select(-1,2,3)
m %>% select(,2,3)
m %>% select(2,3)
blogdown::serve_site()
?effect()
library(effects)
library(effects)
y <- c(3,4)
x <- c('q','w')
data.frame(y,x)
quant <- data.frame(y,x)
quant
lm(y~x,data=quant)
c <- lm(y~x,data=quant)
summary(s)
summary(c)
library(Hmisc)
1:6==3
if (1:6==3){
print("Yes")
} else {
print("No")
}
if (1:6==3){
print("Yes")
} else {
print("No")
}
if (1:6==3){
print("Yes")
} else {
print("No")
}
if (1:6=3){
print("Yes")
} else {
print("No")
}
if (1:6==3){
print("Yes")
} else {
print("No")
}
if (1==3){
print("Yes")
} else {
print("No")
}
if (3==3){
print("Yes")
} else {
print("No")
}
if (4==3){
print("Yes")
} else {
print("No")
}
if (1:6==3){
print("Yes")
} else {
print("No")
}
for (1:6==3){
print("Yes")
} else {
print("No")
}
if (1:6==3){
print("Yes")
} else {
print("No")
}
if (1:6==3){
print("Yes")
} else {
print("No")
}
data.frame(c=2,b=3)
first <- data.frame(c=2,b=3)
second <- data.frame(c=4,h=3)
rbind(first,second)
?write.csv()
write.table(mtcars,sep=",")
write.table(mtcars,"mtcars.csv",sep=",")
write.csv(mtcars,"mtcars.csv")
write.csv(mtcars,"mtcars.csv",row.names = F)
write.table(mtcars,"mtcars.csv",sep=",",row.names = F)
str(mtcars)
for <- c("e","f","g","g")
for <- c("e","f","g","g") %>% as.factor()
fort <- c("e","f","g","g") %>% as.factor()
levels(fort)
my <- list("hello")
my[-1]
my[-1]
blogdown::stop_server()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::stop_server()
blogdown::serve_site()
blogdown::serve_site()
?blogdown::new
?blogdown::new_post()
blogdown::stop_server()
blogdown::serve_site()
blogdown::stop_server()
?blogdown::serve_site
?blogdown::build_site
getwd()
blogdown::hugo_version()
?blogdown::build_site
blogdown::build_site()
